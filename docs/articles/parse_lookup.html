<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to parse and the lookup_ functions • DOPE</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to parse and the lookup_ functions">
<meta property="og:description" content="DOPE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DOPE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/controlled.html">How the dea_controlled file was made.</a>
    </li>
    <li>
      <a href="../articles/dea_scrape.html">Scraping drug names and slang from web pages.</a>
    </li>
    <li>
      <a href="../articles/dea_street_names.html">How the dea_street_names file was made.</a>
    </li>
    <li>
      <a href="../articles/Intro.html">Introduction to DOPE</a>
    </li>
    <li>
      <a href="../articles/make_lookup_df.html">Make Lookup Table</a>
    </li>
    <li>
      <a href="../articles/noslang_street_names.html">How the noslang_stret_names file was made.</a>
    </li>
    <li>
      <a href="../articles/parse_lookup.html">Introduction to parse and the lookup_ functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CTN-0094/DOPE/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="parse_lookup_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to parse and the lookup_ functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CTN-0094/DOPE/blob/master/vignettes/parse_lookup.Rmd"><code>vignettes/parse_lookup.Rmd</code></a></small>
      <div class="hidden name"><code>parse_lookup.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ctn-0094.github.io/DOPE/">DOPE</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></code></pre></div>
<p>This package aims to parse out identifiable drug names given a corpus of text. By corpus of text, we assume that the data has already been imported into R.</p>
<div id="data-drug_df" class="section level2">
<h2 class="hasAnchor">
<a href="#data-drug_df" class="anchor"></a>Data: drug_df</h2>
<hr>
<p>Throughout this vignette, we will employ a sample dataset - <code>drug_df</code> - that is intended to represent data collected from a clinical trial. The dataset contains 3 variables and 500 observations.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(drug_df)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="dv">500</span>   <span class="dv">3</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(drug_df)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>   tibble [<span class="dv">500</span> x <span class="dv">3</span>] (S3<span class="sc">:</span> tbl_df<span class="sc">/</span>tbl<span class="sc">/</span>data.frame)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> textdrug<span class="sc">:</span> chr [<span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>] <span class="st">"Remeron"</span> <span class="st">"Remeron"</span> <span class="st">"Soma"</span> <span class="st">"Ectacy"</span> ...</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> sex     <span class="sc">:</span> chr [<span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>] <span class="st">"male"</span> <span class="st">"female"</span> <span class="st">"female"</span> <span class="st">"female"</span> ...</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> race    <span class="sc">:</span> chr [<span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>] <span class="st">"black"</span> <span class="st">"ai/an"</span> <span class="st">"ai/an"</span> <span class="st">"hn/pi"</span> ...</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(drug_df)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="st">"tbl_df"</span>     <span class="st">"tbl"</span>        <span class="st">"data.frame"</span></span></code></pre></div>
<p>Note: <code>drug_df</code> is a simulated dataset and does not reflect any true clinical observations.</p>
</div>
<div id="parse" class="section level2">
<h2 class="hasAnchor">
<a href="#parse" class="anchor"></a><code>parse()</code>
</h2>
<hr>
<p>The <code><a href="../reference/parse.html">parse()</a></code> function is intended to extract identifiable drug names from a corpus of text such as, clinical trial data, social media, survey or interview transcription. <code><a href="../reference/parse.html">parse()</a></code> takes in one argument, the vector that contains the strings to be parsed.</p>
<p>Here is an example of some problematic records in the <code>drug_df</code> dataset that warrants the use of <code><a href="../reference/parse.html">parse()</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">messy_data</span> <span class="op">&lt;-</span> <span class="va">drug_df</span> <span class="op">%&gt;%</span> 
  <span class="co"># select records that have problematic characters</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">textdrug</span>, <span class="st">",|;|and|\\/|=|\\("</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">textdrug</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">messy_data</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">textdrug</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bup/Nx</td>
</tr>
<tr class="even">
<td align="left">Bup/Nx.</td>
</tr>
<tr class="odd">
<td align="left">bup/nx</td>
</tr>
<tr class="even">
<td align="left">Percocets and Vicodin</td>
</tr>
<tr class="odd">
<td align="left">Barbiturate (doesn’t know which)</td>
</tr>
<tr class="even">
<td align="left">heroin - “few days on, few days off”</td>
</tr>
<tr class="odd">
<td align="left">heroin- "a few days on, few days off</td>
</tr>
<tr class="even">
<td align="left">Ambien = 2 pills</td>
</tr>
<tr class="odd">
<td align="left">Ambien “a bunch” = 2 pills</td>
</tr>
<tr class="even">
<td align="left">promethazine (25mg), clonidine (0.1mg)</td>
</tr>
</tbody>
</table>
<p>As you can see there are so many extraneous/problematic characters, multiple drugs in one record and several variations of the same drug (i.e. “bup/nx”). We assume that the user is solely interested in the drugs themselves, not information such as dosage and units.</p>
<p>This messy data is exactly what <code><a href="../reference/parse.html">parse()</a></code> was designed for.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>drug_names <span class="ot">&lt;-</span> DOPE<span class="sc">::</span><span class="fu">parse</span>(messy_data<span class="sc">$</span>textdrug)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>drug_names</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span>] <span class="st">"bup/nx"</span>       <span class="st">"bup/nx"</span>       <span class="st">"bup/nx"</span>       <span class="st">"percocets"</span>    <span class="st">"vicodin"</span>     </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">6</span>] <span class="st">"barbiturate"</span>  <span class="st">"heroin"</span>       <span class="st">"ambien"</span>       <span class="st">"ambien"</span>       <span class="st">"promethazine"</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">11</span>] <span class="st">"clonidine"</span>   </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">attr</span>(,<span class="st">"na.action"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="dv">8</span> <span class="dv">9</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">attr</span>(,<span class="st">"class"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="st">"omit"</span></span></code></pre></div>
<p>Notice <code><a href="../reference/parse.html">parse()</a></code> cleans up the capitalization and punctuation of ‘bup/nx’. <code><a href="../reference/parse.html">parse()</a></code> has special code to clean up cases of ‘bup/nx’ and also ‘speedball’. It also finds the distinction of the final row “promethazine (25mg), clonidine” and separates them. See the tidytext package.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>The resulting vector can then be passed on to the <code>lookup_*</code> functions to identify whether the input drug is a class, category or a synonym for other drugs in the same category.</p>
</div>
<div id="lookup_" class="section level2">
<h2 class="hasAnchor">
<a href="#lookup_" class="anchor"></a><code>lookup_*</code>
</h2>
<hr>
<div id="lookup" class="section level3">
<h3 class="hasAnchor">
<a href="#lookup" class="anchor"></a><code>lookup()</code>
</h3>
<p>This function relies on a comprehensive lookup table <code>lookup_df</code>. This dataframe contains 3 variables:</p>
<ul>
<li>
<code>class</code> = Highest level classification e.g. “stimulant” or “narcotic (opoid)”</li>
<li>
<code>category</code> = More specific level of classification e.g. “heroin”, “opium” or “marijuana”</li>
<li>
<code>synonym</code> = Common name or street slang for specific drug name e.g. “china”, “dope” or “weed”</li>
</ul>
<p>These names were based on terms used by the DEA.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(lookup_df)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="dv">4766</span>    <span class="dv">3</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lookup_df)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">'data.frame'</span><span class="sc">:</span>    <span class="dv">4766</span> obs. of  <span class="dv">3</span> variables<span class="sc">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="er">$</span> class   <span class="sc">:</span> chr  <span class="st">"hallucinogen"</span> <span class="st">"hallucinogen"</span> <span class="st">"hallucinogen"</span> <span class="st">"hallucinogen"</span> ...</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> category<span class="sc">:</span> chr  <span class="st">"2cb"</span> <span class="st">"2cb"</span> <span class="st">"2cb"</span> <span class="st">"2cb"</span> ...</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> synonym <span class="sc">:</span> chr  <span class="st">"banana split"</span> <span class="st">"bdmpea"</span> <span class="st">"bromo"</span> <span class="st">"mft"</span> ...</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lookup_df)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>   [<span class="dv">1</span>] <span class="st">"data.frame"</span></span></code></pre></div>
<p>The purpose of this function is to return any possible matches to the lookup_df, which is a comprehensive dataframe consisting of all drug classes, categories and synonyms. It serves as a source or helper function to many of the other more specific function in the package. The idea is to match any possible columns with a the single word, a list of separate words or a vector passed as an argument. The dataframe returned will consist of the lookup_df match as well as the <code>original_word</code> that was the source of the match.</p>
<p>Here is an example of a common search done using <code>lookup</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lookup.html">lookup</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">drug_names</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">results</span>, <span class="fl">15</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">original_word</th>
<th align="left">class</th>
<th align="left">category</th>
<th align="left">synonym</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bup/nx</td>
<td align="left">treatment drug</td>
<td align="left">treatment drug</td>
<td align="left">bup/nx</td>
</tr>
<tr class="even">
<td align="left">percocets</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">vicodin</td>
<td align="left">narcotic (opioid)</td>
<td align="left">codeine combinations, non-injectable</td>
<td align="left">vicodin</td>
</tr>
<tr class="even">
<td align="left">barbiturate</td>
<td align="left">depressant</td>
<td align="left">barbiturate</td>
<td align="left">fiorina</td>
</tr>
<tr class="odd">
<td align="left">barbiturate</td>
<td align="left">depressant</td>
<td align="left">barbiturate</td>
<td align="left">nembutal</td>
</tr>
<tr class="even">
<td align="left">barbiturate</td>
<td align="left">depressant</td>
<td align="left">barbiturate</td>
<td align="left">pentothal</td>
</tr>
<tr class="odd">
<td align="left">barbiturate</td>
<td align="left">depressant</td>
<td align="left">barbiturate</td>
<td align="left">seconal</td>
</tr>
<tr class="even">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">a-bomb</td>
</tr>
<tr class="odd">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">a-bomb (mixed with marijuana)</td>
</tr>
<tr class="even">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">achivia</td>
</tr>
<tr class="odd">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">adormidera</td>
</tr>
<tr class="even">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">aip</td>
</tr>
<tr class="odd">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">al capone</td>
</tr>
<tr class="even">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">antifreeze</td>
</tr>
<tr class="odd">
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">heroin</td>
<td align="left">aries</td>
</tr>
</tbody>
</table>
<p>You can see that the dataframe returned could be vast in its matches (heroin returns another few hundred matches alone), and that the other more specific functions, below, might be of more use depending on one’s needs.</p>
<hr>
</div>
<div id="compress_lookup" class="section level3">
<h3 class="hasAnchor">
<a href="#compress_lookup" class="anchor"></a><code>compress_lookup()</code>
</h3>
<p>This function takes in one argument: the table returned from a search using the <code>lookup</code> function. The purpose of this function is to narrow down the results to a more specific dataframe consisting of only relevant values, such as <code>class</code> and/or <code>category</code> depending on the user’s selection. <code>compress_lookup</code> returns, by default, <code>original_word</code>, <code>class</code> and <code>category</code>.</p>
<p>If a researcher wanted to determine the main classes of drugs being used by the patients of a clinical study, they might pass a large vector of substances from clinical notes taken in a study to the <code>lookup</code> function, then filter them down to only return the datafram of classes relevant to their needs.</p>
<p>Here is an example of a common search done using <code>compress_lookup</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>filtered_df <span class="ot">&lt;-</span> <span class="fu">compress_lookup</span>(results)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(filtered_df)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>     original_word             class                             category</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1</span>        bup<span class="sc">/</span>nx    treatment drug                       treatment drug</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>   <span class="dv">2</span>     percocets              <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>                                 <span class="er">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>   <span class="dv">3</span>       vicodin <span class="fu">narcotic</span> (opioid) codeine combinations, non<span class="sc">-</span>injectable</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>   <span class="dv">4</span>   barbiturate        depressant                          barbiturate</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>   <span class="dv">5</span>        heroin            heroin                               heroin</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>   <span class="dv">6</span>        ambien           Unknown                              Unknown</span></code></pre></div>
<p>The resulting dataframe is a short list of only the relevant information needed.</p>
<hr>
</div>
<div id="lookup_syn" class="section level3">
<h3 class="hasAnchor">
<a href="#lookup_syn" class="anchor"></a><code>lookup_syn()</code>
</h3>
<p>The purpose of this function is to find all possible synonyms of, primarily, a slang/street name of a commonly abused drug. Though searching for a drug class or category with <code><a href="../reference/lookup.html">lookup()</a></code> will also return common synonms, this function makes searching specifically for synonyms explicit by taking just one argument: <code>drug_name</code>. The function will then determine the category of the slang term (drug_name) and return all synonyms that share that category.</p>
<p>Here is an example of a common search done using <code>lookup_syn</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">lookup_syn</span>(<span class="st">"shrooms"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(results)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>       category</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1</span>  mushrooms</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>   <span class="dv">2</span> psilocybin</span></code></pre></div>
<p>The resulting dataframe contains a moderate list of terms that are synonyms of the <code>drug_name</code> given as determined by sources such as the DEA, FDA and other publicly available resources.</p>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://juliasilge.github.io/tidytext/" class="uri">https://juliasilge.github.io/tidytext/</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://www.dea.gov/sites/default/files/2020-04/Drugs%20of%20Abuse%202020-Web%20Version-508%20compliant-4-24-20_0.pdf" class="uri">https://www.dea.gov/sites/default/files/2020-04/Drugs%20of%20Abuse%202020-Web%20Version-508%20compliant-4-24-20_0.pdf</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Raymond Balise, Layla Bouzoubaa, Gabriel Odom, Nathaniel Castor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
